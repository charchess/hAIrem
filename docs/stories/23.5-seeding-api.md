# Story 23.5: Seeding API for Graph and Infrastructure Testing

Status: review
Epic: 23 - H-Core Refactoring

## Story
**As a** QA Engineer,
**I want** a dedicated API endpoint to inject specific data states into SurrealDB and Redis,
**so that** I can run deterministic integration tests without manual setup.

## Acceptance Criteria
1. **Seeding Endpoint:**
    - Implement `POST /api/test/seed-graph` in H-Core (internal) or H-Bridge.
2. **State Injection:**
    - The endpoint must accept a JSON payload representing agents, facts, and relationships.
3. **Redis Stream Reset:**
    - Provide a way to purge specific Redis Streams during testing.
4. **Security:**
    - This endpoint must ONLY be active when `ENV=test` or via a specific internal header.

## Tasks
- [x] Implement Seeding service in H-Core.
- [x] Add `/api/test/seed-graph` route to H-Bridge (proxying to Core).
- [x] Add Redis stream cleanup utility.
- [x] Create initial integration test using this API.

## Dev Agent Record
### Agent Model Used
Gemini 2.0 Flash

### Completion Notes List
- Added \`/api/test/seed-graph\` and \`/api/test/reset-streams\` to H-Bridge.
- Verified graph seeding with a new integration test \`tests/test_seeding_api.py\`.
- Enabled DEBUG mode in Docker Compose to activate these endpoints.
