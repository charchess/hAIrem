# Story 7.3: Agent Status Dashboard

**Status:** Done
**Epic:** 7 - Agent Dashboard & UX Polishing

## Story
En tant qu'utilisateur, je veux voir une liste de tous les agents chargés avec leur état actuel (IDLE, THINKING, ERROR) et leur "mood", afin de comprendre la dynamique de ma maison.

## Acceptance Criteria
1. [x] Une vue "Dashboard" affiche des cartes pour chaque agent.
2. [x] Chaque carte affiche le nom, le rôle, l'avatar (miniature) et le statut actuel.
3. [x] L'humeur de l'agent (extraite des payloads `emotion`) est représentée par une icône ou une couleur.
4. [x] Les capacités (commands) de l'agent sont listées sur la carte.

## Dev Notes
- Réutiliser l'endpoint `/api/agents` pour l'initialisation.
- Utiliser les messages `system.status_update` pour les changements d'état en temps réel.
- Dashboard accessible via le raccourci clavier 'D'.

## Tasks
1. [x] Frontend: Créer le layout Grid pour les cartes d'agents.
2. [x] Frontend: Mapper les données de `agentMetadata` sur les cartes.
3. [x] Backend: Émettre des mises à jour de statut lors des cycles de pensée.

## Dev Agent Record
- **Agent Model Used**: Gemini 2.0 Flash
- **Debug Log References**: [N/A]
- **Completion Notes List**:
    - [Dashboard layout implemented with CSS Grid]
    - [Real-time status updates via system.status_update]
    - [Keyboard shortcut 'D' integrated]
    - [Validated with tests/validate_7_3.py]
- **File List**:
    - `apps/h-core/src/models/hlink.py`
    - `apps/h-core/src/domain/agent.py`
    - `apps/a2ui/index.html`
    - `apps/a2ui/style.css`
    - `apps/a2ui/js/renderer.js`
    - `apps/a2ui/js/network.js`
    - `tests/validate_7_3.py`

## QA Results

### Review Date: 2026-01-23

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment
Excellent implementation. The use of a localized `agents` state in the `Renderer` allows for efficient and predictable UI updates. Integration with the backend `BaseAgent` lifecycle ensures all agents (Expert or Base) inherit status broadcasting.

### Refactoring Performed
None required. The implementation followed existing patterns and standards correctly.

### Compliance Check
- Coding Standards: [✓]
- Project Structure: [✓]
- Testing Strategy: [✓] (Full E2E verification provided)
- All ACs Met: [✓]

### Improvements Checklist
- [x] Implemented SYSTEM_STATUS_UPDATE protocol
- [x] Integrated real-time Grid Dashboard
- [x] Validated status transitions via E2E
- [ ] Add "Last Updated" timestamp to agent cards for better observability

### Gate Status
Gate: PASS → docs/qa/gates/7.3-agent-dashboard.yml
Risk profile: docs/qa/assessments/7.3-risk-20260123.md
NFR assessment: docs/qa/assessments/7.3-nfr-20260123.md
Trace matrix: docs/qa/assessments/7.3-trace-20260123.md

### Recommended Status
[✓ Ready for Done]

