# Story 5.2: Exposition des outils HA au LLM (Function Calling)

**Status:** Approved
**Story:**
**As a** Developer,
**I want** to expose Home Assistant capabilities as "Tools" for the LLM,
**so that** agents can decide when to trigger a physical action.

## Acceptance Criteria
1.  Définition d'un registre d'outils (`AgentTools`) dans `BaseAgent`.
2.  L'Expert-Domotique expose au moins 2 outils : `get_entity_status` et `toggle_light`.
3.  Le LLM reçoit la description de ces outils dans ses messages `system`.
4.  L'Expert peut interpréter un message de type `expert.command` pour déclencher ces outils.

## Tasks / Subtasks
- [ ] Task 1: Tool Definition System
    - [ ] Créer un décorateur `@tool` pour marquer les méthodes comme utilisables par l'IA.
- [ ] Task 2: HA Tool Implementation
    - [ ] Implémenter `toggle_light` dans `ExpertDomotique` (appelant `HaClient`).
- [ ] Task 3: Payload Integration
    - [ ] Inclure les définitions d'outils dans `_assemble_payload` pour le LLM.

## Dev Notes
**Technical Context from Architecture:**
- Utiliser le format JSON Schema pour la description des outils (standard OpenAI Tools).

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-20 | 1.0 | Initial draft | Bob (SM) |
