# Story 7.4: UI Navigation & Layout Switcher

**Status:** Done
**Epic:** 7 - Agent Dashboard & UX Polishing

## Story
En tant qu'utilisateur, je veux pouvoir basculer facilement entre la vue "Stage" (Visual Novel) et la vue "Dashboard" (Technique), afin de ne pas encombrer l'écran principal.

## Acceptance Criteria
1. [x] Ajout d'une barre de navigation discrète ou d'un bouton de switch.
2. [x] Transition fluide (fade) entre les deux vues.
3. [x] La zone de chat (Input) reste accessible ou se transforme selon la vue.
4. [x] L'état de la vue est mémorisé pendant la session.

## Tasks
1. [x] Frontend: Créer le conteneur principal avec gestion des vues.
2. [x] Frontend: Implémenter le composant de navigation.
3. [x] CSS: Styliser les transitions entre les modes.

## Dev Agent Record
- **Agent Model Used**: Gemini 2.0 Flash
- **Debug Log References**: [N/A]
- **Completion Notes List**:
    - [Discreet navigation bar implemented at top-left]
    - [Smooth fade transitions between Stage and Dashboard views]
    - [Session persistence implemented via localStorage]
    - [Validated with tests/validate_7_4.py]
- **File List**:
    - `apps/a2ui/index.html`
    - `apps/a2ui/style.css`
    - `apps/a2ui/js/renderer.js`
    - `tests/validate_7_4.py`

## QA Results

### Review Date: 2026-01-23

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment
Implementation provides a very smooth user experience. The transition from a "Full Stage" to a "Dashboard + History" hybrid view is effective and ensures critical interactive components (Chat) are never lost.

### Refactoring Performed
- **File**: `apps/a2ui/js/renderer.js`
  - **Change**: Extraction of view visibility logic to `setStageVisibility` and `setDashboardVisibility`.
  - **Why**: Ensure clean fade transitions and prevent pointer-event conflicts.
  - **How**: Centralized state management in `switchView`.

### Compliance Check
- Coding Standards: [✓]
- Project Structure: [✓]
- Testing Strategy: [✓] (Consolidated Epic 7 Playwright validation passed)
- All ACs Met: [✓]

### Improvements Checklist
- [x] Implemented fade transitions
- [x] Integrated view persistence via localStorage
- [x] Ensured history visibility in Dashboard mode
- [x] Validated keyboard and click navigation

### Gate Status
Gate: PASS → docs/qa/gates/7.4-ui-navigation.yml
Risk profile: docs/qa/assessments/7.4-risk-20260123.md
NFR assessment: docs/qa/assessments/7.4-nfr-20260123.md
Trace matrix: docs/qa/assessments/7.4-trace-20260123.md

### Recommended Status
[✓ Ready for Done]
