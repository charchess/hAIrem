# Story 1.3: Implémenter le chargeur de plugins (Hot-Reload)

**Status:** Approved
**Story:**
**As a** Developer,
**I want** the system to load agent configurations dynamically from the `agents/` folder,
**so that** experts can be added or updated without restarting the H-Core.

## Acceptance Criteria
1.  Surveillance active du dossier racine `agents/`.
2.  Détection automatique des fichiers `expert.yaml` (nouveaux ou modifiés).
3.  Validation du schéma YAML avant chargement (prévention de crash).
4.  Enregistrement dynamique dans le registre interne du H-Core.
5.  Gestion des erreurs : si un YAML est invalide, log l'erreur et ignore le plugin sans planter le cœur.

## Tasks / Subtasks
- [ ] Task 1: File Watching (AC: 1, 2)
    - [ ] Intégrer `watchdog` pour surveiller le dossier `agents/`.
    - [ ] Filtrer les événements pour ne garder que les `*.yaml`.
- [ ] Task 2: Plugin Registry (AC: 4)
    - [ ] Créer une classe `AgentRegistry` pour stocker les instances d'agents chargés.
- [ ] Task 3: YAML Parsing & Validation (AC: 3, 5)
    - [ ] Implémenter le parser avec `PyYAML`.
    - [ ] Ajouter une validation via Pydantic pour garantir la présence des champs `name`, `role`, etc.
- [ ] Task 4: Hot-Reload Logic
    - [ ] Implémenter la logique de mise à jour si un fichier existant est modifié.

## Dev Notes
**Technical Context from Architecture:**

*   **Plugin Structure:**
    - Source: `docs/project-documentation.md#hot-reload-plugins`
    - Location: `/agents/{name}/expert.yaml`.

*   **Risk Mitigation:**
    - Source: `docs/qa/assessments/1.3-risk-profile-20260120.md`
    - Focus on **OPS-001 (Crash on invalid YAML)**: Le bloc `try/except` et la validation de schéma sont CRITIQUES.

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-20 | 1.0 | Initial compliant draft | Bob (SM) |

## Dev Agent Record
### Agent Model Used
_TBD_

## QA Results
_TBD_