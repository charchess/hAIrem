# Risk Profile: Story 1.2 - Configurer le Bus Redis

Date: 20 Janvier 2026
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 4
- Critical Risks: 1
- High Risks: 1
- Risk Score: 65/100

## Critical Risks Requiring Immediate Attention

### 1. TECH-001: Single Point of Failure (SPOF)

**Score: 9 (Critical)**
- **Probability**: Medium (2) - Redis est stable, mais une erreur de config Docker ou réseau est probable en dev/prod.
- **Impact**: High (3) - Si Redis tombe, tout le système hAIrem s'arrête (H-Core, A2UI, Agents). Plus aucune communication n'est possible.
- **Mitigation**:
    - Implementer une reconnexion automatique robuste dans `RedisClient` (Exponential Backoff).
    - Healthcheck Docker pour redémarrer le conteneur Redis automatiquement.
    - **Testing Focus**: Chaos testing (tuer le conteneur Redis et vérifier la reprise).

## Detailed Risk Register

| Risk ID  | Description             | Probability | Impact     | Score | Priority |
| -------- | ----------------------- | ----------- | ---------- | ----- | -------- |
| TECH-001 | Redis SPOF              | Medium (2)  | High (3)   | 6     | High     |
| PERF-001 | Latence Message Bus     | Low (1)     | High (3)   | 3     | Low      |
| SEC-001  | Accès Redis non sécurisé| Medium (2)  | Medium (2) | 4     | Medium   |
| DATA-001 | Perte messages (Pub/Sub)| Medium (2)  | Low (1)    | 2     | Low      |

*Note: TECH-001 reclassé en High (6) car Redis est très stable, mais l'impact reste critique.*

## Risk-Based Testing Strategy

### Priority 1: Resilience Tests (High Risk)
- Simuler une coupure réseau entre H-Core et Redis.
- Vérifier que le système ne crash pas ("fail gracefully") et log l'erreur.

### Priority 2: Security & Config (Medium Risk)
- Vérifier que Redis n'est pas exposé sur le port hôte (bind 127.0.0.1 ou réseau Docker interne uniquement).
- Valider l'utilisation de variables d'environnement pour les credentials (pas de hardcoding).

## Monitoring Requirements
- Alerte si le client Redis est déconnecté plus de 5 secondes.
- Métrique : Nombre de messages publiés/reçus par minute.
