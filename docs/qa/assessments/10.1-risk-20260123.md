# Risk Profile: Story 10.1 - Sleep Automation & Scheduling

Date: 2026-01-23
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 3
- Critical Risks: 0
- High Risks: 0
- Risk Score: 92/100

## Detailed Risk Register

| Risk ID | Description | Category | Probability | Impact | Score | Priority |
|---------|-------------|----------|-------------|--------|-------|----------|
| TECH-001| Timer drift | Technical | Medium (2) | Low (1) | 2 | Low |
| PERF-001| CPU spike during Sleep | Performance | Low (1) | Medium (2) | 2 | Low |
| DATA-001| Double-trigger race cond | Technical | Low (1) | Medium (2) | 2 | Low |

## Risk-Based Testing Strategy

### Priority 1: Inactivity Trigger
- **Validation**: Verified that the `last_user_interaction` is updated on every WebSocket message.
- **Mitigation**: Added an extra check `time_since_last_cycle > inactivity_threshold` to avoid redundant naps after a full cycle.

### Priority 2: Error Resilience
- **Observation**: Checked that the `while True` loop is entirely wrapped in a `try/except`.
- **Verification**: A single LLM failure will not stop future schedules.

## Risk Acceptance Criteria

### Must Fix Before Production
None.

### Can Deploy with Mitigation
- **DATA-001**: If a user sends a message *exactly* when a Sleep Cycle starts.
- **Mitigation**: `MemoryConsolidator` works on a snapshot of unprocessed messages. New messages will simply remain unprocessed until the *next* cycle.
