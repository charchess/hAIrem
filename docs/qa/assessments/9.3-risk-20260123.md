# Risk Profile: Story 9.3 - The Sleep Cycle

Date: 2026-01-23
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 3
- Critical Risks: 0
- High Risks: 0
- Risk Score: 88/100

## Detailed Risk Register

| Risk ID | Description | Category | Probability | Impact | Score | Priority |
|---------|-------------|----------|-------------|--------|-------|----------|
| TECH-001| LLM Hallucinations in facts | Technical | Medium (2) | Medium (2) | 4 | Medium |
| PERF-001| Context window overflow | Performance | Low (1) | Medium (2) | 2 | Low |
| DATA-001| Processed flag race condition | Technical | Low (1) | Medium (2) | 2 | Low |

## Risk-Based Testing Strategy

### Priority 1: Extraction Quality
- **Validation**: Reviewed the `CONSOLIDATION_PROMPT`. It includes clear guidelines and output format instructions.
- **Verification**: Verified that the consolidator handles common JSON formatting issues (Markdown code blocks) from the LLM.

### Priority 2: Data State
- **Observation**: The system uses a strict "processed" flag. 
- **Verification**: Unit tests confirm that messages are only marked as processed *after* facts are successfully stored.

## Risk Acceptance Criteria

### Must Fix Before Production
None.

### Can Deploy with Mitigation
- **TECH-001**: Implement a second "Validation" pass in V3.1 where another LLM call verifies the extracted facts against the source text (~2h).
