# Risk Profile: Story 10.3 - Cross-Agent Collaboration

Date: 2026-01-23
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 3
- Critical Risks: 0
- High Risks: 0
- Risk Score: 90/100

## Detailed Risk Register

| Risk ID | Description | Category | Probability | Impact | Score | Priority |
|---------|-------------|----------|-------------|--------|-------|----------|
| TECH-001| Recursive messaging loops | Technical | Medium (2) | High (3) | 6 | Medium |
| PRIV-001| Internal note leakage to UI| Privacy | Low (1) | Medium (2) | 2 | Low |
| LLM-001 | LLM ignoring internal notes| Technical | Medium (2) | Low (1) | 2 | Low |

## Risk-Based Testing Strategy

### Priority 1: Isolation
- **Validation**: Verified that `on_message` handles `AGENT_INTERNAL_NOTE` by adding to history and returning immediately.
- **Verification**: Confirmed that `main.py` WebSocket bridge does NOT push this type to the UI.

### Priority 2: Context Awareness
- **Validation**: Reviewed `_assemble_payload`. Internal notes are injected as `system` messages.
- **Verification**: This is the strongest way to ensure the LLM pays attention to the data without thinking the *user* said it.

## Risk Acceptance Criteria

### Must Fix Before Production
None.

### Can Deploy with Mitigation
- **TECH-001**: There is currently no depth counter for internal notes.
- **Mitigation**: The `ttl` field in `Metadata` should be decremented. James has implemented a simple "don't message self" check. Global depth check planned for V3.1.
